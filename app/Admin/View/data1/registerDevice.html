{{include file="../common/1header.html"}}
<link href="{{CSS}}jin/3.01.selectretention.css" rel="stylesheet">
<style type="text/css">
    .col-sm-1 {
        width: 90px;
        padding-top: 8px;
    }
    .alert-info{
        color: white;
    }
    .form-group{
        margin-bottom: 35px;
    }
    #server_top .dropdown-header .text{
        font-size: 20px;
        color: black;
        font-weight: 500;
    }
    .text_content{
        margin-left: 35px;
    }
    .dropdown-header{
        padding: 10px 20px;
    }
    #server_top{
        width: 100px
    }
    #group{
        width: 100%
    }
    .table > tbody > tr > td{
        width: 120px;
        padding: 8px 0px;
    }
    .table > tbody > tr > td:nth-child(1),
    .table > thead > tr > td:nth-child(1),
    .table > tbody > tr > td:nth-child(2),
    .table > thead > tr > td:nth-child(2){
        width: 50px;
    }
</style>
<!--|↓↓↓↓↓↓|-->
<div class="jin-content-title"><span>设备注册小时比</span></div>
<div class="alert alert-info">
    {{if $Mobel == 'Mobel'}}
        <div class="form-group" id="group_server_5_mobel"></div>
    {{else}}
        <div class="form-group" id="group_server_5"></div>
    {{/if}}
</div>
<!--查询div-->
<hr/>
<div class="jin-search-div">
    <label for="time_start">日期：</label>
    <input size="16" type="text" id="time_start" class="form-control jin-datetime"
           placeholder="开始日期">
    -
    <input size="16" type="text" id="time_end" class="form-control jin-datetime"
           placeholder="结束日期">
    <a id="jin_search" class="btn btn-success"><span class="glyphicon glyphicon-search"></span></a>
    <a id="server_summary" class="btn btn-success">服务器汇总</a>
    <a id="group_summary" class="btn btn-success">渠道汇总</a>
    <a id="jin_excel" class="btn btn-danger">保存到Excel</a>
</div>
<hr/>
<div class="table-responsive jin-table-12px">
    <table class="table table-striped text-center jin-retention-table">
        <thead>
        <tr>
            <th class="jin-retention-column1">日期</th>
            <th>安装数</th>
            <th>0</th>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
            <th>6</th>
            <th>7</th>
            <th>8</th>
            <th>9</th>
            <th>10</th>
            <th>11</th>
            <th>12</th>
            <th>13</th>
            <th>14</th>
            <th>15</th>
            <th>16</th>
            <th>17</th>
            <th>18</th>
            <th>19</th>
            <th>20</th>
            <th>21</th>
            <th>22</th>
            <th>23</th>
        </tr>
        </thead>
        <tbody id="content"></tbody>
    </table>
</div>
<div id="page"></div>
<!--|↑↑↑↑↑↑|-->
{{include file="../common/2footer.html"}}
<script type="text/javascript">
    gsSelect3('#g', '#p', '#s', getRetention);
    calendar('month', '#time_start', '#time_end');

    var numin0 = function (json) {
        if (!json.r0) {
            json.r0 = '0%';
        }
        if (!json.numin0) {
            json.numin0 = '0%';
        }
        var r_content = json.numin0 + '<br> ( ' + json.r0+ ' )';
        return r_content;
    }
    
    var numin1 = function (json) {
        if (!json.r1) {
            json.r1 = '0%';
        }
        if (!json.numin1) {
            json.numin1 = '0%';
        }
        var r_content = json.numin1 + '<br> ( ' + json.r1+ ' )';
        return r_content;
    }
    var numin2 = function (json) {
        if (!json.r2) {
            json.r2 = '0%';
        }
        if (!json.numin2) {
            json.numin2 = '0%';
        }
        var r_content = json.numin2 + '<br> ( ' + json.r2+ ' )';
        return r_content;
    }
    var numin3 = function (json) {
        if (!json.r3) {
            json.r3 = '0%';
        }
        if (!json.numin3) {
            json.numin3 = '0%';
        }
        var r_content = json.numin3 + '<br> ( ' + json.r3+ ' )';
        return r_content;
    }
    var numin4 = function (json) {
        if (!json.r4) {
            json.r4 = '0%';
        }
        if (!json.numin4) {
            json.numin4 = '0%';
        }
        var r_content = json.numin4 + '<br> ( ' + json.r4+ ' )';
        return r_content;
    }
    var numin5 = function (json) {
        if (!json.r5) {
            json.r5 = '0%';
        }
        if (!json.numin5) {
            json.numin5 = '0%';
        }
        var r_content = json.numin5 + '<br> ( ' + json.r5+ ' )';
        return r_content;
    }
    var numin6 = function (json) {
        if (!json.r6) {
            json.r6 = '0%';
        }
        if (!json.numin6) {
            json.numin6 = '0%';
        }
        var r_content = json.numin6 + '<br> ( ' + json.r6+ ' )';
        return r_content;
    }
    var numin7 = function (json) {
        if (!json.r7) {
            json.r7 = '0%';
        }
        if (!json.numin7) {
            json.numin7 = '0%';
        }
        var r_content = json.numin7 + '<br> ( ' + json.r7+ ' )';
        return r_content;
    }
    var numin8 = function (json) {
        if (!json.r8) {
            json.r8 = '0%';
        }
        if (!json.numin8) {
            json.numin8 = '0%';
        }
        var r_content = json.numin8 + '<br> ( ' + json.r8+ ' )';
        return r_content;
    }
    var numin9 = function (json) {
        if (!json.r9) {
            json.r9 = '0%';
        }
        if (!json.numin9) {
            json.numin9 = '0%';
        }
        var r_content = json.numin9 + '<br> ( ' + json.r9+ ' )';
        return r_content;
    }
    var numin10 = function (json) {
        if (!json.r10) {
            json.r10 = '0%';
        }
        if (!json.numin10) {
            json.numin10 = '0%';
        }
        var r_content = json.numin10 + '<br> ( ' + json.r10+ ' )';
        return r_content;
    }
    var numin11 = function (json) {
        if (!json.r11) {
            json.r11 = '0%';
        }
        if (!json.numin11) {
            json.numin11 = '0%';
        }
        var r_content = json.numin11 + '<br> ( ' + json.r11+ ' )';
        return r_content;
    }
    var numin12 = function (json) {
        if (!json.r12) {
            json.r12 = '0%';
        }
        if (!json.numin12) {
            json.numin12 = '0%';
        }
        var r_content = json.numin12 + '<br> ( ' + json.r12+ ' )';
        return r_content;
    }
    var numin13 = function (json) {
        if (!json.r13) {
            json.r13 = '0%';
        }
        if (!json.numin13) {
            json.numin13 = '0%';
        }
        var r_content = json.numin13 + '<br> ( ' + json.r13+ ' )';
        return r_content;
    }
    var numin14 = function (json) {
        if (!json.r14) {
            json.r14 = '0%';
        }
        if (!json.numin14) {
            json.numin14 = '0%';
        }
        var r_content = json.numin14 + '<br> ( ' + json.r14+ ' )';
        return r_content;
    }
    var numin15 = function (json) {
        if (!json.r15) {
            json.r15 = '0%';
        }
        if (!json.numin15) {
            json.numin15 = '0%';
        }
        var r_content = json.numin15 + '<br> ( ' + json.r15+ ' )';
        return r_content;
    }
    var numin16 = function (json) {
        if (!json.r16) {
            json.r16 = '0%';
        }
        if (!json.numin16) {
            json.numin16 = '0%';
        }
        var r_content = json.numin16 + '<br> ( ' + json.r16+ ' )';
        return r_content;
    }
    var numin17 = function (json) {
        if (!json.r17) {
            json.r17 = '0%';
        }
        if (!json.numin17) {
            json.numin17 = '0%';
        }
        var r_content = json.numin17 + '<br> ( ' + json.r17+ ' )';
        return r_content;
    }
    var numin18 = function (json) {
        if (!json.r18) {
            json.r18 = '0%';
        }
        if (!json.numin18) {
            json.numin18 = '0%';
        }
        var r_content = json.numin18 + '<br> ( ' + json.r18+ ' )';
        return r_content;
    }
    var numin19 = function (json) {
        if (!json.r19) {
            json.r19 = '0%';
        }
        if (!json.numin19) {
            json.numin19 = '0%';
        }
        var r_content = json.numin19 + '<br> ( ' + json.r19+ ' )';
        return r_content;
    }
    var numin20 = function (json) {
        if (!json.r20) {
            json.r20 = '0%';
        }
        if (!json.numin20) {
            json.numin20 = '0%';
        }
        var r_content = json.numin20 + '<br> ( ' + json.r20+ ' )';
        return r_content;
    }
    var numin21 = function (json) {
        if (!json.r21) {
            json.r21 = '0%';
        }
        if (!json.numin21) {
            json.numin21 = '0%';
        }
        var r_content = json.numin21 + '<br> ( ' + json.r21+ ' )';
        return r_content;
    }
    var numin22 = function (json) {
        if (!json.r22) {
            json.r22 = '0%';
        }
        if (!json.numin22) {
            json.numin22 = '0%';
        }
        var r_content = json.numin22 + '<br> ( ' + json.r22+ ' )';
        return r_content;
    }
    var numin23 = function (json) {
        if (!json.r23) {
            json.r23 = '0%';
        }
        if (!json.numin23) {
            json.numin23 = '0%';
        }
        var r_content = json.numin23 + '<br> ( ' + json.r23+ ' )';
        return r_content;
    }
    var url = location.href + "&jinIf=912";
    var arr = ['date', 'numup', numin0, numin1, numin2, numin3, numin4, numin5, numin6, numin7, numin8, numin9, numin10, numin11, numin12, numin13, numin14, numin15, numin16, numin17, numin18, numin19, numin20, numin21, numin22, numin23];
    var id = ["#content", "#page"];
    var data = {};
    function getRetention() {
        data.page       = 1;
        data.group      = $('#g').val();
        data.pi         = $('#p').val();
        data.si         = $('#s').val();
        data.time_start = $('#time_start').val();//查询开始时间
        data.time_end   = $('#time_end').val();//查询结束时间
        $.cookie('cookie_g', data.group, {expires: 30});
        $.cookie('cookie_s', data.si, {expires: 30});
        tableList(url, data, id, arr);
    }
    // 普通查询
    $("#jin_search").on('click', function () {
        data.check_type = 912;
        getRetention();
    });
     //服务器汇总
     $("#server_summary").on('click', function () {
         data.check_type = 998;
         getRetention();
     });
    // 渠道汇总
    $("#group_summary").on('click', function () {
        data.check_type = 999;
        giCollect(getRetention);
    });
    $("#jin_excel").on('click', function () {
        data.page = 'excel';  // 生成excel表
        $.ajax({
            type: "post",
            url: location.href + '&jinIf=951',
            data: data,
            dataType: "json",
            beforeSend: function () {
                layer.load(2, {
                    shade: [0.3, '#fff']
                });
            },
            success: function (output) {
                layer.closeAll('loading');
                location.href = output;
            },
            error: function () {
                layer.closeAll('loading');
                layer.msg('文件下载失败，请缩小筛选条件后再次下载');
            }
        });
    });
</script>
