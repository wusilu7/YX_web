{{include file="../common/1header.html"}}
<!--|↓↓↓↓↓↓|-->
<link href="{{CSS}}jin/3.07.sa.css" rel="stylesheet">
<div class="jin-content-title"><span>装备热更修改</span></div>
<hr />
<div class="form-horizontal col-sm-6 col-sm-offset-3">
    <div class="form-group">
        <label for="ID" class="col-sm-2 control-label">编号</label>
        <div class="col-sm-10">
            <input id="ID" class="form-control" readonly/>
        </div>
    </div>
    <div class="form-group">
        <label for="Name" class="col-sm-2 control-label">BoxDropID</label>
        <div class="col-sm-10">
            <input id="BoxDropID" class="form-control"/>
        </div>
    </div>
    <div class="form-group">
        <label for="ServerOption" class="col-sm-2 control-label">ExtParamSet</label>
        <div class="col-sm-10">
            <input id="ExtParamSet" class="form-control"/>
        </div>
    </div>
    <div class="btn-group center jin-sa-btn">
        <button data-type="update" class="btn  btn-success">修改</button>
    </div>
</div>
<!--|↑↑↑↑↑↑|-->
{{include file="../common/2footer.html"}}

<script type="text/javascript">
    $(function () {
        $.ajax({
            type: "post",
            url: location.href + "&jinIf=920",
            dataType: "json",
            success: function (json) {
                $("#ID").val(json.Id);
                $("#ID").attr('data-data-gi',json.gi);
                $("#ID").attr('data-data-sign',json.gi_sign);
                $("#BoxDropID").val(json.BoxDropID);
                $("#ExtParamSet").val(json.ExtParamSet);
            }
        });
    });
    $('button[data-type="update"]').on('click', function () {//修改服务器
        $.ajax({
            type: "POST",
            url: location.href + "&jinIf=913",
            data: {
                gi: $("#ID").attr('data-data-gi'),
                sign: $("#ID").attr('data-data-sign'),
                ID:$("#ID").val(),
                BoxDropID:$("#BoxDropID").val(),
                ExtParamSet:$("#ExtParamSet").val(),
            },
            dataType: "json",
            beforeSend: function () {
                layer.load(2, {
                    shade: [0.3, '#fff']//0.3透明度的白色背景
                });
            },
            success: function (json) {
                layer.closeAll('loading');
                layer.alert('成功', {icon: 1}, function (index) {
                    layer.close(index);
                    window.location.reload();
                });
            }
        });
    });
</script>
