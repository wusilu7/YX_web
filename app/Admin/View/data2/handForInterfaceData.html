{{include file="../common/1header.html"}}

<style type="text/css">
    .col-sm-1 {
        width: 90px;
        padding-top: 8px;
    }
    .alert-info{
        color: white;
    }
    .form-group{
        margin-bottom: 35px;
    }
    #server_top .dropdown-header .text{
        font-size: 20px;
        color: black;
        font-weight: 500;
    }
    .text_content{
        margin-left: 35px;
    }
    .dropdown-header{
        padding: 10px 20px;
    }
    #server_top{
        width: 100px
    }
    #group{
        width: 100%
    }
    #group_server_8{
    	margin-top:20px;
    }
    .layui-badge{
    	color: white
    }
    .explain{
    	margin-bottom:3px;
    }
    .select_group_div {
        width: 26%;
    }
</style>
	<div class="jin-content-title"><span>手动更新接口数据</span></div>
	<div class="jin-search-div">
	    <div class="form-group">
	    	<label for="time">日期：</label>
		    <input size="16" type="text" id="time" class="form-control jin-datetime"
		           placeholder="日期">
	        <label class="col-sm-1 control-label" style="line-height: 35px;width: 105px;">调用接口：</label>
	        <div class="col-sm-2">
	            <select id="type" name="type" class="selectpicker show-tick form-control" >
	                <option value="0">游戏日报(服务器+角色)</option>
	                <option value="1">设备留存率接口(2-4天留存）</option>
					<option value="11">设备留存率接口（5-7天留存）</option>
					<option value="111">设备留存率接口(15，30，60天留存）</option>
	                <option value="2">账号留存率接口（2-4天留存）</option>
                    <option value="22">账号留存率接口（5-7天留存）</option>
                    <option value="222">账号留存率接口（15，30，60天留存）</option>\
					<option value="3">设备渠道留存</option>
					<option value="5">账号渠道留存</option>
					<option value="4">LTV(0-4天留存）</option>
					<option value="44">LTV(5-10天留存）</option>
					<option value="444">LTV(15-45天留存）</option>
					<option value="7">渠道LTV(0-4天留存）</option>
					<option value="77">渠道LTV(5-10天留存）</option>
					<option value="777">渠道LTV(15-60天留存）</option>
					<option value="7777">渠道LTV(75-120天留存）</option>
					<option value="77777">渠道LTV(150-240天留存）</option>
					<option value="777777">渠道LTV(270-360天留存）</option>
					<option value="6">角色留存率接口（2-4天留存）</option>
					<option value="66">角色留存率接口（5-7天留存）</option>
					<option value="666">角色留存率接口（15，30，60天留存）</option>
					<option value="9">渠道日报</option>
					<option value="10">付费渠道留存</option>
					<option value="12">付费留存率接口(2-4天留存）</option>
					<option value="121">付费留存率接口（5-7天留存）</option>
					<option value="1211">付费留存率接口(15，30，60天留存）</option>
	            </select>
	        </div>
	        <a id="do_it" class="btn btn-success">执行</a>
	    </div>
	</div>
{{include file="../common/2footer.html"}}
<script type="text/javascript">
	calendar('month', '#time');
	var data = {};

	$("#do_it").click(function () {
		var type   = $("#type").val();
		var time   = $("#time").val();
        data.datei = time;

		if (type == 0) {
			var url = '/?p=I&c=Time&a=task0_1&jinIf=912&date='+ time;
		} else if (type == 1) {
            var url = '/?p=I&c=Time&a=task2_0&jinIf=912&date='+ time;
        } else if (type == 11) {
            var url = '/?p=I&c=Time&a=task2_0_1&jinIf=912&date='+ time;
        } else if (type == 111) {
            var url = '/?p=I&c=Time&a=task2_0_2&jinIf=912&date='+ time;
        } else if (type == 2) {
			var url = '/?p=I&c=Time&a=task0_3&jinIf=912&date='+ time;
		} else if (type == 22) {
           var url = '/?p=I&c=Time&a=task0_3_1&jinIf=912&date='+ time;
        } else if (type == 222) {
            var url = '/?p=I&c=Time&a=task0_3_2&jinIf=912&date='+ time;
        } else if (type == 3) {
            var url = '/?p=I&c=Time&a=task6&jinIf=912&date='+ time;
        } else if (type == 5) {
            var url = '/?p=I&c=Time&a=task7&jinIf=912&date='+ time;
        } else if (type == 6) {
            var url = '/?p=I&c=Time&a=task1&jinIf=912&date='+ time;
        } else if (type == 66) {
            var url = '/?p=I&c=Time&a=task1_1&jinIf=912&date='+ time;
        } else if(type == 666){
            var url = '/?p=I&c=Time&a=task1_2&jinIf=912&date='+ time;
        } else if(type == 7){
            var url = '/?p=I&c=Time&a=task8&jinIf=912&date='+ time;
        }else if(type == 77){
            var url = '/?p=I&c=Time&a=task8_1&jinIf=912&date='+ time;
        }else if(type == 777){
            var url = '/?p=I&c=Time&a=task8_2&jinIf=912&date='+ time;
        }else if(type == 7777){
            var url = '/?p=I&c=Time&a=task8_3&jinIf=912&date='+ time;
        }else if(type == 77777){
            var url = '/?p=I&c=Time&a=task8_4&jinIf=912&date='+ time;
        }else if(type == 777777){
            var url = '/?p=I&c=Time&a=task8_5&jinIf=912&date='+ time;
        }else if(type == 9){
            var url = '/?p=I&c=Time&a=task9&jinIf=912&date='+ time;
        }else if(type == 10){
            var url = '/?p=I&c=Time&a=task10&jinIf=912&date='+ time;
        } else if (type == 12) {
            var url = '/?p=I&c=Time&a=task11_0&jinIf=912&date='+ time;
        } else if (type == 121) {
            var url = '/?p=I&c=Time&a=task11_0_1&jinIf=912&date='+ time;
        } else if (type == 1211) {
            var url = '/?p=I&c=Time&a=task11_0_2&jinIf=912&date='+ time;
        }else if(type == 4){
            var url = '/?p=I&c=Time&a=task2&jinIf=912&date='+ time;
        } else if(type == 44){
            var url = '/?p=I&c=Time&a=task2_1&jinIf=912&date='+ time;
        } else{
            var url = '/?p=I&c=Time&a=task2_2&jinIf=912&date='+ time;
        }

        $.ajax({
            type: "post",
            url: url,
            data: data,
            dataType: "json",
            beforeSend: function () {
                layer.load(2, {
                    shade: [0.3, '#fff']
                });
            },
            success: function (json) {
            	layer.closeAll();	
            	if (json.status == 100) {
            		layer.alert('更新成功', {icon: 6});
            	} else {
            		layer.alert('部分数据更新失败', {icon: 5});
            	}
            },
            error: function () {
            	layer.closeAll();
		        layer.alert('更新失败', {icon: 5});
		    }
        });
    });
</script>